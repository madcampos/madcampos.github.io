import*as m from"../meta/env.js";import{TextDecorator as y}from"./lib.js";document.addEventListener("DOMContentLoaded",async()=>{if("serviceWorker"in navigator)try{await navigator.serviceWorker.register(`${m.PUBLIC_URL}sw.js`)}catch(t){console.error(t)}const o=new y,s=document.querySelector("#source-text"),l=document.querySelector("#styles"),d=document.querySelector("#decorators");document.querySelector("#styles-loader")?.remove(),o.listStyles().forEach(t=>{const e=document.createElement("input"),r=document.createElement("label");r.innerText=t,e.dataset.style=t,e.classList.add("style"),e.readOnly=!0,e.addEventListener("focus",()=>{e.select()}),l.appendChild(r),l.appendChild(e)}),document.querySelector("#decorators-loader")?.remove(),o.listDecorators().forEach(t=>{const e=document.createElement("input"),r=document.createElement("label");r.innerText=t,e.dataset.decorator=t,e.classList.add("decorator"),e.readOnly=!0,e.addEventListener("focus",()=>{e.select()}),d.appendChild(r),d.appendChild(e)});const a=()=>{const t=document.querySelectorAll(".style"),e=document.querySelectorAll(".decorator"),r=s.value;t.forEach(c=>{const n=c.dataset.style;c.value=o.decorateText(r,n,{stripAccents:document.querySelector("#strip-accents")?.checked})}),e.forEach(c=>{const n=c.dataset.decorator,{preferedStyle:u}=o.getDecorator(n)??{preferedStyle:"nostyle"};c.value=o.decorateText(r,u,{leftDecorator:n,rightDecorator:n,stripAccents:document.querySelector("#strip-accents")?.checked})})};s.addEventListener("input",a),s.addEventListener("change",a);const i=new URL(window.location.toString()).searchParams.get("text")??"";i&&(s.value=i,a())});
